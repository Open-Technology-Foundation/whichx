.TH WHICH 1 "2025" "which 2.0" "User Commands"
.SH NAME
which \- locate a command (robust, POSIX-compliant replacement)
.SH SYNOPSIS
.B which
[\fIOPTIONS\fR]
.IR filename " ..."
.SH DESCRIPTION
.B which
is a robust, POSIX-compliant drop-in replacement for the classic Unix
.BR which (1)
command. It locates executables in your PATH with enhanced features.
.PP
.B which
returns the pathnames of files (or links) that would be executed in the
current environment, had its arguments been given as commands in a
strictly POSIX-conformant shell. It searches the
.B PATH
environment variable for executable files matching the names of the arguments.
.SS Key Features
.IP \(bu 2
Predictable exit codes (0, 1, 2, 22) for reliable scripting
.IP \(bu 2
Canonical path resolution to follow symlinks
.IP \(bu 2
True silent mode for clean conditionals
.IP \(bu 2
POSIX-compliant PATH handling including empty elements
.IP \(bu 2
Combined short options support (\-ac equivalent to \-a \-c)
.IP \(bu 2
Sourceable for 12x faster interactive use
.IP \(bu 2
Consistent behavior across all Unix/Linux systems
.SH OPTIONS
Options can be combined: \fB\-ac\fR is equivalent to \fB\-a \-c\fR.
.TP
.BR \-a ", " \-\-all
Print all matching pathnames of each argument, not just the first match.
By default, only the first match in PATH is displayed.
.TP
.BR \-c ", " \-\-canonical
Resolve symlinks and print canonical paths using
.BR realpath (1).
This resolves all symbolic links and relative path components to show
the actual executable location.
.TP
.BR \-q ", " \-\-quiet
Quiet mode. Suppress all output; communicate via exit code only.
Useful for conditional checks in scripts.
.TP
.BR \-s ", " \-\-silent
Silent mode. Same as \-q.
.TP
.BR \-V ", " \-\-version
Print version information and exit.
.TP
.BR \-h ", " \-\-help
Display help message and exit.
.TP
.B \-\-
End of options. All subsequent arguments are treated as filenames,
even if they begin with a hyphen.
.SH EXIT STATUS
.B which
uses specific exit codes to allow scripts to distinguish between
different error conditions:
.TP
.B 0 (EXIT_SUCCESS)
All specified commands found successfully.
.TP
.B 1 (EXIT_NOT_FOUND)
One or more commands not found.
.TP
.B 2 (EXIT_USAGE_ERROR)
Usage error (no arguments provided).
.TP
.B 22 (EXIT_INVALID_OPTION / EINVAL)
Invalid command-line option.
.SH EXAMPLES
.SS Basic Usage
Find the location of the ls command:
.PP
.RS
.nf
$ which ls
/usr/bin/ls
.fi
.RE
.PP
Find multiple commands at once:
.PP
.RS
.nf
$ which ls cat grep
/usr/bin/ls
/usr/bin/cat
/usr/bin/grep
.fi
.RE
.SS Find All Matches (\-a)
Show all executables in PATH, not just the first:
.PP
.RS
.nf
$ which \-a python3
/usr/bin/python3
/usr/local/bin/python3
.fi
.RE
.SS Canonical Paths (\-c)
Resolve symlinks to find the actual executable:
.PP
.RS
.nf
$ which python3
/usr/bin/python3

$ which \-c python3
/usr/bin/python3.12
.fi
.RE
.SS Combined Options
Options can be combined for convenience:
.PP
.RS
.nf
$ which \-ac python3
/usr/bin/python3.12
/usr/local/bin/python3.11
.fi
.RE
.SS Silent Mode (\-q/\-s)
Use in scripts for conditional checks:
.PP
.RS
.nf
# Simple conditional
if which \-q docker; then
    echo "Docker is available"
fi

# Pre-flight dependency check
which \-q gcc make cmake || {
    echo "Missing build tools" >&2
    exit 1
}
.fi
.RE
.SS Direct Path Verification
Verify a specific path is executable:
.PP
.RS
.nf
$ which /usr/local/bin/my\-script
/usr/local/bin/my-script

$ which ./local\-tool
./local-tool
.fi
.RE
.SH SOURCEABLE MODE
For interactive shells,
.B which
can be sourced instead of executed as a subprocess, providing ~12x faster performance:
.PP
.RS
.nf
# Add to ~/.bashrc or install to /etc/profile.d/
source /usr/local/bin/which

# Now which runs as a shell function (~7500 ops/s vs ~600 ops/s)
which ls
.fi
.RE
.SH POSIX COMPLIANCE
.SS Empty PATH Elements
Per POSIX, an empty element in PATH means the current directory.
.B which
handles this correctly, unlike many implementations:
.PP
.RS
.nf
# Leading colon = empty first element = current directory
$ PATH=":/usr/bin" which ./my\-script
./my-script

# Double colon = empty middle element
$ PATH="/usr/bin::/usr/local/bin" which ls
/usr/bin/ls
.fi
.RE
.SS Search Order
.B which
searches PATH directories in order and returns the first match
(unless
.B \-a
is specified), exactly as a POSIX shell would resolve the command.
.SH ENVIRONMENT
.TP
.B PATH
Colon-separated list of directories to search for executables.
Empty elements are treated as the current directory per POSIX.
.SH FILES
.TP
.I /usr/local/bin/which
Default installation location.
.TP
.I /etc/profile.d/which.bash
Sourceable installation location (optional).
.SH DEPENDENCIES
.TP
.B bash
Version 4.4 or later.
.TP
.BR realpath (1)
Required for canonical path resolution
.RB ( \-c
option). Falls back to
.BR readlink (1)
if unavailable.
.SH SEE ALSO
.BR whereis (1),
.BR type (1),
.BR command (1),
.BR realpath (1),
.BR bash (1)
.SH STANDARDS
.B which
follows POSIX guidelines for PATH searching, including proper handling
of empty PATH elements which many implementations get wrong.
.SH BUGS
Report bugs at: https://github.com/Open-Technology-Foundation/whichx/issues
.SH AUTHOR
Indonesian Open Technology Foundation (admin@yatti.id)
.SH COPYRIGHT
Copyright \(co 2025 Indonesian Open Technology Foundation.
.PP
License GPLv3+: GNU GPL version 3 or later.
.br
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
.SH LINKS
Project repository: https://github.com/Open-Technology-Foundation/whichx
